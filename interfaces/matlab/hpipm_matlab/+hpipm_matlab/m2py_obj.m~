function py_obj = m2py_obj(m_obj, py_obj)    
    import hpipm_matlab.*
    py_props = properties(py_obj);
    for iprop = 1:length(py_props)
        py_thisprop = py_props{iprop};
        py_thisprop_value = py_obj.(py_thisprop);
        
        if py_thisprop_value ~= py.NoneType
            error(['Trying to assign to non-None attribute "', py_thisprop, '" in Python object.']);
        end
        
        display(['Assigning ', py_thisprop]);
        ispemty_cell = eval(['~isempty(m_obj.', py_thisprop])
        if 
            eval(['py_obj.', py_thisprop, '=', 'm2py_cell(m_obj.', py_thisprop, ');']);
        end
%         catch
%             error(['Cannot assign "', py_thisprop, '" to Pyton object.']);
%         end
        eval(['m_thisprop_value =  m_obj.', py_thisprop, ';'])
%         if isempty(m_thisprop_value)
%             error(['Trying to assign empty field "', py_thisprop, '" in Python object.']);
%         end
    end   
end